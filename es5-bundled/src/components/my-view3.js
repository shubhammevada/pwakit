define(["./my-app.js"],function(_myApp){"use strict";function _templateObject9_26f1d3c052f111ea983457ae48b01430(){var data=babelHelpers.taggedTemplateLiteral(["\n        button {\n          border: 2px solid var(--app-dark-text-color);\n          border-radius: 3px;\n          padding: 8px 16px;\n        }\n\n        button:hover {\n          border-color: var(--app-primary-color);\n          color: var(--app-primary-color);\n        }\n\n        .cart,\n        .cart svg {\n          fill: var(--app-primary-color);\n          width: 64px;\n          height: 64px;\n        }\n\n        .circle.small {\n          margin-top: -72px;\n          width: 28px;\n          height: 28px;\n          font-size: 16px;\n          font-weight: bold;\n          line-height: 30px;\n        }\n      "]);_templateObject9_26f1d3c052f111ea983457ae48b01430=function _templateObject9_26f1d3c052f111ea983457ae48b01430(){return data};return data}function _templateObject8_26f1d3c052f111ea983457ae48b01430(){var data=babelHelpers.taggedTemplateLiteral(["\n      <section>\n        <h2>State container example: shopping cart</h2>\n        <div class=\"cart\">","<div class=\"circle small\">","</div></div>\n\n        <p>This is a slightly more advanced example, that simulates a\n          shopping cart: getting the products, adding/removing items to the\n          cart, and a checkout action, that can sometimes randomly fail (to\n          simulate where you would add failure handling). </p>\n        <p>This view, passes properties down to its two children, <code>&lt;shop-products&gt;</code> and\n        <code>&lt;shop-cart&gt;</code>, which fire events back up whenever\n        they need to communicate changes.</p>\n      </section>\n      <section>\n        <h3>Products</h3>\n        <shop-products .products=\"","\"></shop-products>\n\n        <br>\n        <h3>Your Cart</h3>\n        <shop-cart .products=\"","\" .cart=\"","\"></shop-cart>\n\n        <div>","</div>\n        <br>\n        <p>\n          <button ?hidden=\"","\"\n              @click=\"","\">\n            Checkout\n          </button>\n        </p>\n      </section>\n    "]);_templateObject8_26f1d3c052f111ea983457ae48b01430=function _templateObject8_26f1d3c052f111ea983457ae48b01430(){return data};return data}function _templateObject7_26f1d3c052f111ea983457ae48b01430(){var data=babelHelpers.taggedTemplateLiteral(["\n        :host {\n          display: block;\n        }\n      "]);_templateObject7_26f1d3c052f111ea983457ae48b01430=function _templateObject7_26f1d3c052f111ea983457ae48b01430(){return data};return data}function _templateObject6_26f1d3c052f111ea983457ae48b01430(){var data=babelHelpers.taggedTemplateLiteral(["\n          <div>\n            <shop-item .name=\"","\" .amount=\"","\" .price=\"","\"></shop-item>\n            <button\n                @click=\"","\"\n                data-index=\"","\"\n                title=\"Remove from cart\">\n              ","\n            </button>\n          </div>\n        "]);_templateObject6_26f1d3c052f111ea983457ae48b01430=function _templateObject6_26f1d3c052f111ea983457ae48b01430(){return data};return data}function _templateObject5_26f1d3c052f111ea983457ae48b01430(){var data=babelHelpers.taggedTemplateLiteral(["\n      <p ?hidden=\"","\">Please add some products to cart.</p>\n      ","\n    "]);_templateObject5_26f1d3c052f111ea983457ae48b01430=function _templateObject5_26f1d3c052f111ea983457ae48b01430(){return data};return data}function _templateObject4_26f1d3c052f111ea983457ae48b01430(){var data=babelHelpers.taggedTemplateLiteral(["\n        :host {\n          display: block;\n        }\n      "]);_templateObject4_26f1d3c052f111ea983457ae48b01430=function _templateObject4_26f1d3c052f111ea983457ae48b01430(){return data};return data}function _templateObject3_26f1d3c052f111ea983457ae48b01430(){var data=babelHelpers.taggedTemplateLiteral(["\n          <div>\n            <shop-item name=\"","\" amount=\"","\" price=\"","\"></shop-item>\n            <button\n                .disabled=\"","\"\n                @click=\"","\"\n                data-index=\"","\"\n                title=\"","\">\n              ","\n            </button>\n          </div>\n        "]);_templateObject3_26f1d3c052f111ea983457ae48b01430=function _templateObject3_26f1d3c052f111ea983457ae48b01430(){return data};return data}function _templateObject2_26f1d3c052f111ea983457ae48b01430(){var data=babelHelpers.taggedTemplateLiteral(["\n      ","\n    "]);_templateObject2_26f1d3c052f111ea983457ae48b01430=function _templateObject2_26f1d3c052f111ea983457ae48b01430(){return data};return data}function _templateObject_26f1d3c052f111ea983457ae48b01430(){var data=babelHelpers.taggedTemplateLiteral(["\n      ",":\n      <span ?hidden=\"","\">"," * </span>\n      $","\n      </span>\n    "]);_templateObject_26f1d3c052f111ea983457ae48b01430=function _templateObject_26f1d3c052f111ea983457ae48b01430(){return data};return data}var ShopItem=function(_LitElement){babelHelpers.inherits(ShopItem,_LitElement);function ShopItem(){babelHelpers.classCallCheck(this,ShopItem);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(ShopItem).apply(this,arguments))}babelHelpers.createClass(ShopItem,[{key:"render",value:function render(){return(0,_myApp.html)(_templateObject_26f1d3c052f111ea983457ae48b01430(),this.name,0===this.amount,this.amount,this.price)}}],[{key:"properties",get:function get(){return{name:{type:String},amount:{type:String},price:{type:String}}}}]);return ShopItem}(_myApp.LitElement);window.customElements.define("shop-item",ShopItem);var ShopProducts=function(_LitElement2){babelHelpers.inherits(ShopProducts,_LitElement2);function ShopProducts(){babelHelpers.classCallCheck(this,ShopProducts);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(ShopProducts).apply(this,arguments))}babelHelpers.createClass(ShopProducts,[{key:"render",value:function render(){var _this=this;return(0,_myApp.html)(_templateObject2_26f1d3c052f111ea983457ae48b01430(),Object.keys(this.products).map(function(key){var item=_this.products[key];return(0,_myApp.html)(_templateObject3_26f1d3c052f111ea983457ae48b01430(),item.title,item.inventory,item.price,0===item.inventory,_this._addToCart,item.id,0===item.inventory?"Sold out":"Add to cart",0===item.inventory?"Sold out":_myApp.addToCartIcon)}))}},{key:"_addToCart",value:function _addToCart(event){this.dispatchEvent(new CustomEvent("addToCart",{bubbles:!0,composed:!0,detail:{item:event.currentTarget.dataset.index}}))}}],[{key:"properties",get:function get(){return{products:{type:Object}}}},{key:"styles",get:function get(){return[_myApp.ButtonSharedStyles,(0,_myApp.css)(_templateObject4_26f1d3c052f111ea983457ae48b01430())]}}]);return ShopProducts}(_myApp.LitElement);window.customElements.define("shop-products",ShopProducts);var ShopCart=function(_LitElement3){babelHelpers.inherits(ShopCart,_LitElement3);function ShopCart(){babelHelpers.classCallCheck(this,ShopCart);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(ShopCart).apply(this,arguments))}babelHelpers.createClass(ShopCart,[{key:"render",value:function render(){var _this2=this;return(0,_myApp.html)(_templateObject5_26f1d3c052f111ea983457ae48b01430(),0!==this.cart.addedIds.length,this._displayCart(this.cart).map(function(item){return(0,_myApp.html)(_templateObject6_26f1d3c052f111ea983457ae48b01430(),item.title,item.amount,item.price,_this2._removeFromCart,item.id,_myApp.removeFromCartIcon)}))}},{key:"_displayCart",value:function _displayCart(cart){var items=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=cart.addedIds[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var id=_step.value,item=this.products[id];items.push({id:item.id,title:item.title,amount:cart.quantityById[id],price:item.price})}}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return items}},{key:"_calculateTotal",value:function _calculateTotal(cart){var total=0,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=cart.addedIds[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var id=_step2.value,item=this.products[id];total+=item.price*cart.quantityById[id]}}catch(err){_didIteratorError2=!0;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&null!=_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return parseFloat(Math.round(100*total)/100).toFixed(2)}},{key:"_removeFromCart",value:function _removeFromCart(event){this.dispatchEvent(new CustomEvent("removeFromCart",{bubbles:!0,composed:!0,detail:{item:event.currentTarget.dataset.index}}))}}],[{key:"properties",get:function get(){return{cart:{type:Object},products:{type:Object}}}},{key:"styles",get:function get(){return[_myApp.ButtonSharedStyles,(0,_myApp.css)(_templateObject7_26f1d3c052f111ea983457ae48b01430())]}}]);return ShopCart}(_myApp.LitElement);window.customElements.define("shop-cart",ShopCart);var MyView3=function(_PageViewElement){babelHelpers.inherits(MyView3,_PageViewElement);babelHelpers.createClass(MyView3,[{key:"render",value:function render(){return(0,_myApp.html)(_templateObject8_26f1d3c052f111ea983457ae48b01430(),_myApp.addToCartIcon,this._numItemsInCart(this._cart),this._products,this._products,this._cart,this._error,0==this._cart.addedIds.length,this.checkout)}}],[{key:"properties",get:function get(){return{_cart:{type:Object},_quantity:{type:Number},_error:{type:String}}}},{key:"styles",get:function get(){return[_myApp.SharedStyles,_myApp.ButtonSharedStyles,(0,_myApp.css)(_templateObject9_26f1d3c052f111ea983457ae48b01430())]}}]);function MyView3(){var _this3;babelHelpers.classCallCheck(this,MyView3);_this3=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(MyView3).call(this));_this3._cart={addedIds:[],quantityById:{}};_this3._error="";_this3._products=_this3._getAllProducts();_this3.addEventListener("addToCart",function(e){return _this3._addToCart(e.detail.item)});_this3.addEventListener("removeFromCart",function(e){return _this3._removeFromCart(e.detail.item)});return _this3}babelHelpers.createClass(MyView3,[{key:"checkout",value:function checkout(){var flip=Math.floor(2*Math.random());if(0===flip){this._error="Checkout failed. Please try again"}else{this._error="";this._cart={addedIds:[],quantityById:{}}}}},{key:"_addToCart",value:function _addToCart(productId){this._error="";if(0<this._products[productId].inventory){this._products[productId].inventory--;if(-1!==this._cart.addedIds.indexOf(productId)){this._cart.quantityById[productId]++}else{this._cart.addedIds.push(productId);this._cart.quantityById[productId]=1}}this._products=JSON.parse(JSON.stringify(this._products));this._cart=JSON.parse(JSON.stringify(this._cart))}},{key:"_removeFromCart",value:function _removeFromCart(productId){this._error="";this._products[productId].inventory++;var quantity=this._cart.quantityById[productId];if(1===quantity){this._cart.quantityById[productId]=0;this._cart.addedIds=this._cart.addedIds.filter(function(e){return e!==productId})}else{this._cart.quantityById[productId]--}this._products=JSON.parse(JSON.stringify(this._products));this._cart=JSON.parse(JSON.stringify(this._cart))}},{key:"_numItemsInCart",value:function _numItemsInCart(cart){var num=0,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _iterator3=cart.addedIds[Symbol.iterator](),_step3,id;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){id=_step3.value;num+=cart.quantityById[id]}}catch(err){_didIteratorError3=!0;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&null!=_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}return num}},{key:"_getAllProducts",value:function _getAllProducts(){var PRODUCT_LIST=[{id:1,title:"Cabot Creamery Extra Sharp Cheddar Cheese",price:10.99,inventory:2},{id:2,title:"Cowgirl Creamery Mt. Tam Cheese",price:29.99,inventory:10},{id:3,title:"Tillamook Medium Cheddar Cheese",price:8.99,inventory:5},{id:4,title:"Point Reyes Bay Blue Cheese",price:24.99,inventory:7},{id:5,title:"Shepherd's Halloumi Cheese",price:11.99,inventory:3}],products=PRODUCT_LIST.reduce(function(obj,product){obj[product.id]=product;return obj},{});return products}}]);return MyView3}(_myApp.PageViewElement);window.customElements.define("my-view3",MyView3)});